<!DOCTYPE html>
<html>
  <head> </head>
  <body>
    <button onclick="getFinalURL()">Get Final URL</button>

    <script>
      function getFinalURL() {
        let win = window.open(
          "https://lh3.google.com/u/0/d/1snA1SLGWmWh5GhDtIulL3Y5BY75CYfOyFiy__dbHgIA=w5000-h5000-p-k-nu",
          "_blank"
        );

        let checkUrl = setInterval(() => {
          try {
            console.log("Current URL:", win.location.href);
          } catch (error) {
            console.log("Tidak bisa akses URL, mungkin redirect ke domain lain.");
            clearInterval(checkUrl);
          }

          if (win.closed) {
            console.log("Tab ditutup.");
            clearInterval(checkUrl);
          }
        }, 500);
      }
    </script>
  </body>
</html>
